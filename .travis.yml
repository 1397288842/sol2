language: cpp
compiler:
    - gcc
    - clang

branches:
    only:
        - master
        - develop

before_install:
    - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
    - sudo add-apt-repository -y ppa:saiarcot895/chromium-beta
    - sudo apt-get --yes update
    - if [ "$CXX" == "g++" ]; then sudo apt-get --yes install g++-4.9; fi
    - if [ "$CXX" == "g++" ]; then export CXX=g++-4.9; fi
    - if [ "$CXX" == "clang++" ]; then sudo apt-get --yes install clang++-3.5; fi
    - if [ "$CXX" == "clang++" ]; then export CXX=clang++-3.5; fi
    - sudo apt-get --yes install ninja-build
    - sudo apt-get --yes install liblua5.2-dev
    - sudo apt-get --yes install libluajit-5.1-dev

script: 
    - ./bootstrap.py --ci --lua-lib=lua5.2 --cxx=$CXX && ninja
    - ./bootstrap.py --ci --lua-lib=luajit --cxx=$CXX && ninja